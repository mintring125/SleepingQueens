# 슬리핑 퀸즈 (Sleeping Queens) 디지털 보드게임

교실 내 로컬 네트워크에서 동작하는 멀티 디바이스 디지털 보드게임입니다.

## 준비물

- Node.js (v16 이상)
- 교사용 노트북/PC 1대 (서버)
- 테이블 태블릿 1대 (중앙 디스플레이)
- 플레이어 태블릿 2~4대
- 동일 WiFi 네트워크 (인터넷 불필요)

## 실행 방법

### 방법 1: 배치 파일 (간편)
1. `start.bat` 파일을 더블클릭합니다
2. 처음 실행 시 자동으로 필요한 패키지가 설치됩니다
3. 콘솔에 서버 주소가 표시됩니다

### 방법 2: 수동 실행
```bash
cd server
npm install    # 최초 1회만
node index.js
```

서버가 시작되면 다음과 같이 표시됩니다:
```
=== Sleeping Queens Server ===
Table:  http://192.168.x.x:3000/table
Player: http://192.168.x.x:3000/player
==============================
```

## 게임 진행

### 1단계: 세션 생성 (테이블 태블릿)
1. 테이블 태블릿에서 `http://서버IP:3000/table` 접속
2. **"게임 만들기"** 버튼 클릭
3. QR 코드와 참가 URL이 표시됩니다

### 2단계: 플레이어 참가
1. 플레이어 태블릿에서 QR 코드를 스캔하거나 `http://서버IP:3000/player/join.html` 접속
2. 세션 코드 입력 (QR 스캔 시 자동 입력)
3. 이름 입력 후 **"참가하기"** 클릭
4. 2~4명까지 참가 가능

### 3단계: 게임 시작
1. 최소 2명이 참가하면 테이블 화면에 **"게임 시작"** 버튼이 나타납니다
2. 버튼을 누르면 게임이 시작됩니다
3. 각 플레이어에게 카드 5장이 배분됩니다

### 4단계: 턴 진행
각 플레이어의 턴에 30초 이내로 행동해야 합니다.

**가능한 행동:**
- **숫자 카드 버리기**: 카드를 선택한 후 "버리기" 클릭
  - 1장: 아무 숫자 카드 1장
  - 페어: 같은 숫자 2장 (예: 5, 5)
  - 수식: 합이 마지막 카드와 같은 조합 (예: 3+7=10)
- **킹(왕) 사용**: 킹 카드 선택 → "카드 사용" → 깨울 퀸 선택
- **기사 사용**: 기사 카드 선택 → "카드 사용" → 상대 플레이어의 퀸 선택
- **수면포션 사용**: 수면포션 카드 선택 → "카드 사용" → 상대 플레이어의 퀸 선택

**반격:**
- 기사 공격 시 → 드래곤 카드로 방어 가능 (10초 이내)
- 수면포션 공격 시 → 마법봉 카드로 방어 가능 (10초 이내)

### 5단계: 승리
- **2~3명 플레이**: 퀸 5명 모으기 또는 50점 달성
- **4명 플레이**: 퀸 4명 모으기 또는 40점 달성

## 카드 종류

| 카드 | 수량 | 효과 |
|------|------|------|
| 킹 (왕) 👑 | 8장 | 잠자는 퀸 1명 깨우기 |
| 기사 ⚔️ | 4장 | 상대 퀸 훔치기 (드래곤으로 방어 가능) |
| 수면포션 🧪 | 4장 | 상대 퀸 재우기 (마법봉으로 방어 가능) |
| 드래곤 🐉 | 4장 | 기사 공격 방어 |
| 마법봉 ✨ | 4장 | 수면포션 방어 |
| 숫자 (1~10) 🔢 | 40장 | 버리고 새 카드 뽑기 |

## 특수 퀸

| 퀸 | 점수 | 특수 능력 |
|----|------|----------|
| 장미 퀸 🌹 | 5점 | 깨울 때 추가로 퀸 1명 더 깨움 |
| 고양이 퀸 🐱 | 15점 | 강아지 퀸과 동시 소유 불가 |
| 강아지 퀸 🐶 | 15점 | 고양이 퀸과 동시 소유 불가 |
| 하트 퀸 ❤️ | 20점 | 최고 점수 퀸 |
| 팬케이크 퀸 🥞 | 15점 | - |
| 기타 퀸들 | 10점 | - |

## 연결 끊김 시

- 플레이어 연결이 끊기면 자동으로 턴을 건너뜁니다
- 같은 이름으로 다시 접속하면 게임 상태가 복구됩니다

## 문제 해결

| 문제 | 해결 방법 |
|------|----------|
| 서버가 시작되지 않음 | Node.js 설치 확인, `npm install` 재실행 |
| QR 코드가 안 보임 | 참가 URL을 직접 입력하세요 |
| 연결이 안 됨 | 같은 WiFi 네트워크인지 확인 |
| 카메라 스캔이 안 됨 | 세션 코드를 수동으로 입력하세요 |

## 기술 스택

- **Backend**: Node.js + Express + Socket.IO
- **Frontend**: HTML5 + CSS3 + Vanilla JavaScript
- **QR 코드**: qrcode (서버), html5-qrcode (클라이언트)
- **통신**: WebSocket (실시간)
